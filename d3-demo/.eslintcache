[{"/Users/lius/Desktop/software/web-learning/d3-demo/src/App.js":"1","/Users/lius/Desktop/software/web-learning/d3-demo/src/index.js":"2","/Users/lius/Desktop/software/web-learning/d3-demo/src/components/tree.js":"3","/Users/lius/Desktop/software/web-learning/d3-demo/src/static/games.js":"4","/Users/lius/Desktop/software/web-learning/d3-demo/src/reportWebVitals.js":"5","/Users/lius/Desktop/software/web-learning/d3-demo/src/static/games-copy.js":"6","/Users/lius/Desktop/software/web-learning/d3-demo/src/components/tree2.js":"7","/Users/lius/Desktop/software/web-learning/d3-demo/src/components/tree1.js":"8","/Users/lius/Desktop/software/web-learning/d3-demo/src/components/base/circle.js":"9","/Users/lius/Desktop/software/web-learning/d3-demo/src/components/base/line.js":"10","/Users/lius/Desktop/software/web-learning/d3-demo/src/components/base/bar.js":"11"},{"size":525,"mtime":1606206432488,"results":"12","hashOfConfig":"13"},{"size":500,"mtime":1606116015688,"results":"14","hashOfConfig":"13"},{"size":2916,"mtime":1606184352376,"results":"15","hashOfConfig":"13"},{"size":6565,"mtime":1606117295621,"results":"16","hashOfConfig":"13"},{"size":362,"mtime":1606116015689,"results":"17","hashOfConfig":"13"},{"size":3381,"mtime":1606187221761,"results":"18","hashOfConfig":"13"},{"size":1490,"mtime":1606185359508,"results":"19","hashOfConfig":"13"},{"size":5615,"mtime":1606188964496,"results":"20","hashOfConfig":"13"},{"size":1102,"mtime":1606200938547,"results":"21","hashOfConfig":"13"},{"size":1838,"mtime":1606204212765,"results":"22","hashOfConfig":"13"},{"size":2969,"mtime":1606212405037,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"1txj0e2",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/lius/Desktop/software/web-learning/d3-demo/src/App.js",["49","50","51","52","53","54"],"/Users/lius/Desktop/software/web-learning/d3-demo/src/index.js",[],["55","56"],"/Users/lius/Desktop/software/web-learning/d3-demo/src/components/tree.js",["57","58","59"],"import { useRef, useEffect, useState } from \"react\"\n\nimport * as d3 from \"d3\";\n\nconst Index = props => {\n\n  const { games } = props\n  console.log(\"----\", games);\n\n  const root = useRef(null)\n  const color = useRef(null)\n  const initialSetting = useRef(null)\n\n  /**\n   * 初始化环境\n   */\n  const initial = () => {\n    const width = document.documentElement.clientWidth\n    const height = document.documentElement.clientHeight\n    const svg = d3.select(\"#mainsvg\")\n      .attr('width', width)\n      .attr('height', height)\n    const margin = { top: 50, right: 150, bottom: 50, left: 60 };\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    const g = svg.append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);\n    initialSetting.current = {\n      innerWidth,\n      innerHeight,\n      g\n    }\n  }\n\n  /**\n   * 读取数据\n   */\n  const readData = () => {\n    const { innerHeight, innerWidth } = initialSetting.current\n    // 数据预处理\n    root.current = d3.hierarchy(games)\n    root.current = d3.tree().size([innerHeight, innerWidth])(root.current);\n    root.current.descendants().forEach((d, i) => {\n      d.id = i;\n      d._children = d.children;\n      if (d.depth === 1) d.children = null;\n    });\n    renderTree()\n  }\n\n  /**\n   * 渲染数据\n   */\n  const renderTree = () => {\n    const { g } = initialSetting.current\n    color.current = d3.scaleOrdinal()\n      .domain(root.current.descendants().filter(d => d.depth <= 1).map(d => d.data.name))\n      .range(d3.schemeCategory10)\n\n    // 画线\n    g.selectAll(\"path\")\n      .data(root.current.links())\n      .join(\"path\")\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"black\")\n      .attr(\"stroke-width\", 1.5)\n      .attr(\"d\", d3.linkHorizontal().x(d => d.y).y(d => d.x));\n\n    // 画点\n    g.selectAll('circle')\n      .data(root.current.descendants()).join('circle')\n      .attr('cx', d => d.y)\n      .attr('cy', d => d.x)\n      .attr('stroke-width', 3)\n      .attr('r', 6)\n      .attr('fill', fill)\n      .on(\"click\", d => {\n        d.children = d.children ? null : d._children\n        renderTree();\n      });\n\n    // 显示文字\n    g.selectAll('text')\n      .data(root.current.descendants()).join('text')\n      .attr('font-size', '1em')\n      .attr('text-anchor', d => d.children ? 'end' : 'start')\n      .attr('x', d => (d.children ? -6 : 6) + d.y)\n      .attr('y', d => d.x + 6)\n      .text(d => d.data.name)\n\n  }\n\n  const fill = (d) => {\n    if (d.depth === 0) {\n      return color.current(d.data.name)\n    }\n    while (d.depth > 1) {\n      d = d.parent\n    }\n    return color.current(d.data.name)\n  }\n\n\n  useEffect(() => {\n    initial();\n    readData()\n  }, []);\n\n  useEffect(() => {\n    readData()\n  }, [games])\n\n\n  return (\n    <svg id=\"mainsvg\" className=\"svgs\"\n      style={{ display: 'block', margin: 'auto' }} />\n  )\n}\n\nexport default Index","/Users/lius/Desktop/software/web-learning/d3-demo/src/static/games.js",[],"/Users/lius/Desktop/software/web-learning/d3-demo/src/reportWebVitals.js",[],"/Users/lius/Desktop/software/web-learning/d3-demo/src/static/games-copy.js",[],"/Users/lius/Desktop/software/web-learning/d3-demo/src/components/tree2.js",["60"],"/Users/lius/Desktop/software/web-learning/d3-demo/src/components/tree1.js",["61","62","63","64","65"],"/Users/lius/Desktop/software/web-learning/d3-demo/src/components/base/circle.js",["66","67"],"/Users/lius/Desktop/software/web-learning/d3-demo/src/components/base/line.js",["68","69"],"import { useRef, useState, useEffect } from 'react'\nimport { select, curveCardinal, line, scaleLinear, axisBottom, axisLeft } from 'd3'\n\nconst width = document.documentElement.clientWidth;\nconst height = document.documentElement.clientHeight;\nconst dx = 10;\nconst dy = 159;\nconst margin = { top: 120, right: 120, bottom: 120, left: 120 }\n\nconst innerWidth = width - margin.left - margin.right;\nconst innerHeight = height - margin.top - margin.bottom;\n\nconst svgStyle = {\n  width: innerWidth,\n  height: innerHeight\n}\n\nconst Index = () => {\n\n  const [data, setData] = useState([190, 400, 253, 78, 368]);\n  const svgRef = useRef()\n\n  useEffect(() => {\n    const svg = select(svgRef.current)\n\n    console.log(\"innerHeight\", innerHeight);\n\n    const xScale = scaleLinear().domain([0, data.length - 1]).range([0, innerWidth]);\n\n    const yScale = scaleLinear().domain([0, innerHeight]).range([innerHeight, 0]);\n\n    const xAxis = axisBottom(xScale).ticks(data.length).tickFormat(index => index + 1);\n\n    const yAxis = axisLeft(yScale);\n\n    const myLine = line()\n      .x((value, index) => xScale(index))\n      .y(yScale)\n      .curve(curveCardinal)\n\n    svg.selectAll(\".line\")\n      .data([data])\n      .join('path')\n      .attr(\"class\", \"line\")\n      .attr(\"d\", myLine)\n      .attr('stroke', 'blue')\n      .attr('fill', 'none')\n\n    svg\n      .append('g')\n      .attr('class', 'x-axis')\n      .style('transform', `translateY(${innerHeight}px)`)\n      .call(xAxis);\n\n    svg\n      .append(\"g\")\n      .attr('class', 'y-axis')\n      .call(yAxis);\n\n  }, [data])\n\n  return (\n    <>\n      <svg ref={svgRef} style={svgStyle} >\n        <g className='x-axis' />\n        <g className='y-axis' />\n      </svg>\n      <br /><br />\n      <button onClick={() => setData(data.map(item => item * 2))}>updata Data</button>\n    </>\n  )\n\n}\n\nexport default Index","/Users/lius/Desktop/software/web-learning/d3-demo/src/components/base/bar.js",["70","71"],{"ruleId":"72","severity":1,"message":"73","line":2,"column":8,"nodeType":"74","messageId":"75","endLine":2,"endColumn":12},{"ruleId":"72","severity":1,"message":"76","line":3,"column":8,"nodeType":"74","messageId":"75","endLine":3,"endColumn":14},{"ruleId":"72","severity":1,"message":"77","line":4,"column":8,"nodeType":"74","messageId":"75","endLine":4,"endColumn":12},{"ruleId":"72","severity":1,"message":"78","line":7,"column":8,"nodeType":"74","messageId":"75","endLine":7,"endColumn":17},{"ruleId":"72","severity":1,"message":"79","line":11,"column":10,"nodeType":"74","messageId":"75","endLine":11,"endColumn":14},{"ruleId":"72","severity":1,"message":"80","line":11,"column":16,"nodeType":"74","messageId":"75","endLine":11,"endColumn":23},{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","replacedBy":"84"},{"ruleId":"72","severity":1,"message":"85","line":1,"column":29,"nodeType":"74","messageId":"75","endLine":1,"endColumn":37},{"ruleId":"86","severity":1,"message":"87","line":106,"column":6,"nodeType":"88","endLine":106,"endColumn":8,"suggestions":"89"},{"ruleId":"86","severity":1,"message":"87","line":110,"column":6,"nodeType":"88","endLine":110,"endColumn":13,"suggestions":"90"},{"ruleId":"91","severity":1,"message":"92","line":9,"column":6,"nodeType":"93","messageId":"94","endLine":9,"endColumn":17,"fix":"95"},{"ruleId":"72","severity":1,"message":"85","line":1,"column":29,"nodeType":"74","messageId":"75","endLine":1,"endColumn":37},{"ruleId":"72","severity":1,"message":"96","line":145,"column":11,"nodeType":"74","messageId":"75","endLine":145,"endColumn":21},{"ruleId":"72","severity":1,"message":"97","line":151,"column":11,"nodeType":"74","messageId":"75","endLine":151,"endColumn":19},{"ruleId":"72","severity":1,"message":"98","line":186,"column":9,"nodeType":"74","messageId":"75","endLine":186,"endColumn":13},{"ruleId":"86","severity":1,"message":"87","line":203,"column":6,"nodeType":"88","endLine":203,"endColumn":12,"suggestions":"99"},{"ruleId":"72","severity":1,"message":"100","line":6,"column":7,"nodeType":"74","messageId":"75","endLine":6,"endColumn":9},{"ruleId":"72","severity":1,"message":"101","line":7,"column":7,"nodeType":"74","messageId":"75","endLine":7,"endColumn":9},{"ruleId":"72","severity":1,"message":"100","line":6,"column":7,"nodeType":"74","messageId":"75","endLine":6,"endColumn":9},{"ruleId":"72","severity":1,"message":"101","line":7,"column":7,"nodeType":"74","messageId":"75","endLine":7,"endColumn":9},{"ruleId":"72","severity":1,"message":"100","line":6,"column":7,"nodeType":"74","messageId":"75","endLine":6,"endColumn":9},{"ruleId":"72","severity":1,"message":"101","line":7,"column":7,"nodeType":"74","messageId":"75","endLine":7,"endColumn":9},"no-unused-vars","'Tree' is defined but never used.","Identifier","unusedVar","'Circle' is defined but never used.","'Line' is defined but never used.","'gamesCopy' is defined but never used.","'data' is assigned a value but never used.","'setData' is assigned a value but never used.","no-native-reassign",["102"],"no-negated-in-lhs",["103"],"'useState' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'readData'. Either include it or remove the dependency array.","ArrayExpression",["104"],["105"],"new-parens","Missing '()' invoking a constructor.","NewExpression","missing",{"range":"106","text":"107"},"'nodeUpdate' is assigned a value but never used.","'nodeExit' is assigned a value but never used.","'fill' is assigned a value but never used.",["108"],"'dx' is assigned a value but never used.","'dy' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"109","fix":"110"},{"desc":"111","fix":"112"},[242,242],"()",{"desc":"113","fix":"114"},"Update the dependencies array to be: [readData]",{"range":"115","text":"116"},"Update the dependencies array to be: [games, readData]",{"range":"117","text":"118"},"Update the dependencies array to be: [data, readData]",{"range":"119","text":"120"},[2676,2678],"[readData]",[2722,2729],"[games, readData]",[5513,5519],"[data, readData]"]